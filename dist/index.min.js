module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=require("jQuery")},function(t,e){t.exports=require("Tone")},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p})),n.d(e,"PlayerUI",(function(){return d}));var i=n(0),a=n.n(i),r=n(1),s=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var p=function(){function t(e,n){u(this,t),this.loaded=!1,this.current=0,this.startTime=-1,this.player=new s.a.Player(e,this.loadDone.bind(this)).toMaster(),this.loadCallback=n}return f(t,[{key:"loadDone",value:function(){this.loaded=!0,this.duration=this.player.buffer.duration,this.loadCallback&&this.loadCallback()}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.loaded&&(this.current=t,this.startTime=Date.now(),this.player.start(0,t))}},{key:"pause",value:function(){this.loaded&&(this.current+=(Date.now()-this.startTime)/1e3,this.player.stop())}}]),t}(),d=function(){function t(e,n,i,r){u(this,t),this.id=e,this.parent=a()("#".concat(n)),this.configFill(r),this.callback=this.config.callback,i&&(this.getTime=i),this.createUI(),this.offsetTime=0}return f(t,[{key:"configFill",value:function(t){this.config=l(l({},{songname:!1,second:!0,range:!0,callback:null,usePlay:!0}),t)}},{key:"createUI",value:function(){var t='<i id="'.concat(this.id,'" class="fa fa-play song player-button" state="play"></i>');this.config.songname&&(t+='<span for="'.concat(this.id,'" class="player-songname"> ').concat(this.config.songname," </span>")),this.config.second&&(t+='<span id="'.concat(this.id,'-sec" class="player-second"> 00:00 </span>')),this.config.range&&(t+='<input id="'.concat(this.id,'-range" type="range" class="custom-range player-range" value="0">')),this.parent.append("<div>".concat(t,"</div>")),this.config.range&&(this.range=a()("#".concat(this.id,"-range")),this.range.on("input",this.rangeInput.bind(this)),this.range.change(this.rangeChange.bind(this))),this.config.second&&(this.sec=a()("#".concat(this.id,"-sec"))),this.btn=a()("#".concat(this.id)),this.setClick(),this.restart()}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.offsetTime;this.offsetTime=t,this.startTime=Date.now(),this.btn.removeClass("fa-play"),this.btn.addClass("fa-pause"),this.btn.attr("state","pause"),this.activeInterval()}},{key:"pause",value:function(){this.offsetTime+=(Date.now()-this.startTime)/1e3,this.btn.removeClass("fa-pause"),this.btn.addClass("fa-play"),this.btn.attr("state","play"),this.disableInterval()}},{key:"restart",value:function(){this.pause(),this.offsetTime=0,this.range.val(0),this.sec.html("00:00"),this.btn.attr("player-disable",!1)}},{key:"setMax",value:function(t){this.range.attr("max",t)}},{key:"activeStart",value:function(){this.btn.attr("player-disable",!1),this.btn.attr("style","color: black")}},{key:"inactiveStart",value:function(){this.btn.attr("player-disable",!0),this.btn.attr("style","color: gray")}},{key:"activeInterval",value:function(){this.interval=setInterval(this.setRangewithAudio.bind(this),1e3)}},{key:"disableInterval",value:function(){this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"setClick",value:function(){this.btn.click(this.clickTrigger.bind(this))}},{key:"clickTrigger",value:function(){if("true"!=this.btn.attr("player-disable")){var t=this.btn.attr("state"),e=this.range.val();this.callback&&this.callback({id:this.id,state:t,now:e}),this.config.usePlay&&("play"==t?this.play():"pause"==t&&this.pause())}}},{key:"setRangewithAudio",value:function(){var t=this.getTime();t>this.range.attr("max")?this.restart():(this.range.val(t),this.sec.html(this.formatTime(Math.floor(t))))}},{key:"getTime",value:function(){return(Date.now()-this.startTime)/1e3+this.offsetTime}},{key:"formatTime",value:function(t){var e=Math.floor(t%3600/60),n=t%60;return[e>9?e:"0"+e,n>9?n:"0"+n].join(":")}},{key:"rangeChange",value:function(){this.offsetTime=parseInt(this.range.val()),"pause"==this.btn.attr("state")&&(this.config.usePlay&&this.play(),this.callback&&this.callback({id:this.id,state:"play",now:parseInt(this.range.val())}))}},{key:"rangeInput",value:function(){this.disableInterval(),this.sec.html(this.formatTime(this.range.val()))}}]),t}()}]);